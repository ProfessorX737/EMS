{% extends "layout.html" %}
{% block body %}

<h1>{{event.getName()}}</h1>
<h2> Start: </h2>
{{event.getStartDateTime()}}
<h2> End: </h2>
{{event.getEndDateTime()}}
<h2> Description </h2>
    {{event.getDescription()}}
<h2> Presenter </h2>
{{event.getConvener()}}
<h2> Venue </h2>
{{event.getVenueName()}}
<h2> Capacity </h2>
{{event.getNumAttendees()}} / {{event.getCapacity()}}
<h2> Status </h2>
{% if event.isOpen() %}
    Open
{% elif event.isCancelled() %}
    Cancelled
{% else %}
    Closed
{% endif %}
{% if not event.isCancelled() %}
    {% if event.isFull() %}
    {% else %}
        {% if isOwner == false and current_user.isRegistered(event.getId()) == false %}
        <form method="post" action="{{ url_for('register_user',eventId=event.getId()) }}">
            <p><input type="submit" value="Register" ></p>
        </form>
        {% endif %}
        {% if current_user.isRegistered(event.getId()) == true %}
        <form method="post" action="{{ url_for('deregister_user',eventId=event.getId()) }}">
            <p><input type="submit" value="Deregister" ></p>
        </form>
        {% endif %}
    {% endif %}
    {% if isOwner == true %}
    <form method="post" action="{{ url_for('edit_event',eventId=event.getId()) }}">
        <p><input type="submit" value="Edit Event" ></p>
    </form>
    <form method="post" action="{{ url_for('cancel_event',eventId=event.getId()) }}">
        <p><input type="submit" value="Cancel Event" ></p>
    </form>
    {% if event.getClassName() == 'Seminar' %}
        <a href="{{ url_for('create_session',seminarId=event.getId()) }}" > Create sessions </a>
        <h2> Current Sessions </h2>
        <div class="flex">
            {% for session in event.getSessions() %}
            <div class="eventbox">
                {{session.getName()}}<br>
                Presenter: {{session.getPresenter()}}<br>
                Start: {{session.getStartDateTime()}}<br>
                End: {{session.getEndDateTime()}}<br>
            </div>
            {% endfor %}
        </div>
    {% endif %}
    {% endif %}

{% endif %}
{% endblock %}